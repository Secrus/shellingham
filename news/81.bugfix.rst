Fix a bug that ``detect_shell()`` always returns the host shell on MacOS.
